## CPU高速缓存和指令重排
问题：
1、缓存中的数据和主内存的数据并不是实时同步的，各个CPU间缓存的数据也不是一致的。会导致在同一时间点，各CPU看到同一内存的数据可能会不一致。  
2、指令重排在单CPU下可以正常执行，但是在多CPU下，不能确保正确执行。
解决：内存屏障
1、写内存屏障：（store barrier）强制写入主内存。
2、读内存屏障：（load barrier）强制从主内存读取数据。